---
# Set up web server for Moogi

- name: Installing Dependencies
  apt: name={{ item }}
       update_cache=yes
       state=latest
  with_items:
    - "postgresql"
    - "postgresql-client"
    - "tomcat8"
    - "tomcat8-common"

- name: Setting up default postgres user
  postgresql_user: db=postgresql
                   name=postgres
                   password={{ postgres_pw }}
                   encrypted=true
                   state=present

- name: Adding Moogi user
  postgresql_user: name=moogi
                   password={{ moogi_pw }}
                   encrypted=true
                   state=present

- name: Adding Moogi DB
  postgresql_db: name=moogi
                 login_user=moogi
                 owner=moogi
                 state=present

